import { NextResponse } from "next/server";import { isAdmin } from "@/lib/auth";import { prisma } from "@/lib/prisma";
export async function GET(){if(!isAdmin())return NextResponse.json({error:'Unauthorized'},{status:401});return NextResponse.json(await prisma.serviceArea.findMany());}
export async function POST(req:Request){if(!isAdmin())return NextResponse.json({error:'Unauthorized'},{status:401});const{action,data,id}=await req.json();if(action==='create')return NextResponse.json(await prisma.serviceArea.create({data}));if(action==='update')return NextResponse.json(await prisma.serviceArea.update({where:{id},data}));if(action==='delete')return NextResponse.json(await prisma.serviceArea.delete({where:{id}}));return NextResponse.json({error:'Bad request'},{status:400});}
